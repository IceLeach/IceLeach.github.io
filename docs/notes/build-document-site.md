---
nav:
  title: ç¬”è®°
  # order: 0
# group:
#   title: ä»‹ç»
#   order: 0
title: æ­å»ºè‡ªå·±çš„æ–‡æ¡£ç«™
---

# æ­å»ºè‡ªå·±çš„æ–‡æ¡£ç«™

ç”¨ dumi å’Œ github pages æ¥æ­å»ºä¸€ä¸ªæ–‡æ¡£å‹ä¸ªäººç½‘ç«™ã€‚

## dumi

ä¸€ä¸ªç”¨æ¥æ­å»ºé™æ€ç«™ç‚¹çš„æ¡†æ¶ï¼Œé£æ ¼å¯ä»¥çœ‹çœ‹[å®˜ç½‘](https://d.umijs.org)ã€‚

dumi é€‚åˆç”¨æ¥æ­å»ºæ–‡æ¡£ç«™ï¼Œä¹Ÿé€‚åˆç”¨æ¥æ­å»º React ç»„ä»¶åº“ã€‚

## å‡†å¤‡

### Node.js

å®‰è£… [Node.js](https://nodejs.org/en/download) å¹¶ç¡®ä¿ç‰ˆæœ¬å¤§äº14ï¼Œæ¨èä½¿ç”¨ [nvm](https://github.com/coreybutler/nvm-windows) æ¥ç®¡ç† Node.js ç‰ˆæœ¬ã€‚

```bash
$ node -v
```

ä½¿ç”¨è¿™ä¸ªæŒ‡ä»¤æ¥æ£€æŸ¥ Node.js ç‰ˆæœ¬

### åŒ…ç®¡ç†å·¥å…·

å¦‚æœä¸æƒ³ç”¨ Node.js è‡ªå¸¦çš„ npm ï¼Œå»ºè®®æå‰å…ˆå‡†å¤‡å¥½ã€‚

***æ³¨ï¼šè¿™ä¸ªæ–‡æ¡£é‡Œæˆ‘ä¼šä½¿ç”¨ yarn æ¥æ¼”ç¤º***

```bash
$ npm instal -g yarn # å®‰è£…yarn
# æˆ–
$ npm instal -g pnpm # pnpm
```

### ç¼–è¾‘å™¨/IDE

éšä¾¿æ‰¾ä¸€ä¸ªè‡ªå·±å–œæ¬¢çš„ç¼–è¾‘å™¨/IDEï¼Œä¾‹å¦‚ [VS Code](https://code.visualstudio.com) ã€‚

## å¼€å§‹æ­å»º

### åˆå§‹åŒ–

```bash
# å…ˆæ‰¾ä¸ªåœ°æ–¹å»ºä¸ªç©ºç›®å½•ã€‚
$ mkdir myapp && cd myapp

# é€šè¿‡å®˜æ–¹å·¥å…·åˆ›å»ºé¡¹ç›®ï¼Œé€‰æ‹©ä½ éœ€è¦çš„æ¨¡æ¿
$ npx create-dumi

# é€‰æ‹©ä¸€ä¸ªæ¨¡æ¿
$ ? Pick template type â€º - Use arrow-keys. Return to submit.
$ â¯   Static Site # ç”¨äºæ„å»ºç½‘ç«™
$     React Library # ç”¨äºæ„å»ºç»„ä»¶åº“ï¼Œæœ‰ç»„ä»¶ä¾‹å­
$     Theme Package # ä¸»é¢˜åŒ…å¼€å‘è„šæ‰‹æ¶ï¼Œç”¨äºå¼€å‘ä¸»é¢˜åŒ…
```

åªæ˜¯ç”¨æ¥åšæ–‡æ¡£ç«™çš„è¯å¯ä»¥é€‰ç¬¬ä¸€ä¸ªï¼Œæ¥ä¸‹æ¥æ ¹æ®æç¤ºä¸€æ­¥æ­¥åšä¸‹å»å°±å¥½äº†ã€‚

å¦‚æœåœ¨å®‰è£…ä¾èµ–çš„æ—¶å€™å‡ºç°äº†ç½‘ç»œé”™è¯¯ï¼Œå¯ä»¥å°è¯•åˆ‡æ¢åˆ°å›½å†…çš„é•œåƒæºå†é‡æ–°`install`ï¼š

```bash
# åˆ‡æ¢é•œåƒæº
$ yarn config set registry https://registry.npmmirror.com/

# å®‰è£…ä¾èµ–
$ yarn
```

å¯åŠ¨ï¼š

```bash
$ yarn start
```

æ‰“å¼€åœ°å€å‡ºç°ä¸‹é¢çš„ç•Œé¢å°±ç®—æˆåŠŸäº†ã€‚

![ç¤ºä¾‹](/images/2024-03-06-1.png)

å‰©ä¸‹çš„ï¼Œå‚è€ƒ dumi çš„æ–‡æ¡£æ­å»ºè‡ªå·±å–œæ¬¢çš„ç«™ç‚¹å§ï¼

## éƒ¨ç½²åˆ° Github Pages

github æä¾›äº†å…è´¹çš„é™æ€ç«™ç‚¹æ‰˜ç®¡æœåŠ¡ï¼Œéƒ¨ç½²åˆ° Github Pages æ˜¯ä¸€ä¸ªå¾ˆå¥½çš„é€‰æ‹©ã€‚

### å‡†å¤‡ä¸€ä¸ªä»“åº“å¹¶éƒ¨ç½²

1. ç™»å½• github ã€‚
2. å³ä¸Šè§’é€‰æ‹©`Your repositories`ã€‚

![ç¤ºä¾‹](/images/2024-03-06-2.png)

3. ç‚¹å‡»`New`

![ç¤ºä¾‹](/images/2024-03-06-3.png)

4. è¾“å…¥ä»“åº“åç§°ï¼Œæ ¼å¼ä¸º`{ç”¨æˆ·å}.github.io`ï¼Œé€‰æ‹©`Public`å…¬å¼€ä»“åº“ï¼Œæœ€åç‚¹å‡»`Create repository`æŒ‰é’®åˆ›å»ºä»“åº“ã€‚**ï¼ˆæˆ‘è¿™é‡Œæ˜¯å› ä¸ºå·²ç»åˆ›å»ºè¿‡äº†ï¼Œæ‰€ä»¥ä¼šæœ‰çº¢å­—è­¦å‘Šï¼‰**

![ç¤ºä¾‹](/images/2024-03-06-4.png)

5. æŒ‰ç…§æç¤ºå°†æœ¬åœ°çš„é¡¹ç›®æäº¤åˆ°ä»“åº“ã€‚
6. åˆ›å»ºä¸€ä¸ªåä¸º`gh-pages`åˆ†æ”¯ã€‚**ï¼ˆåå­—å¯ä»¥éšä¾¿å–ï¼Œç”¨æ¥å­˜æ”¾æ„å»ºåçš„äº§ç‰©ï¼‰**
7. æœ¬åœ°æ‰“åŒ…é¡¹ç›®ï¼š

```bash
$ yarn build
```

8. å°†æ‰“åŒ…å¥½çš„äº§ç‰©ï¼ˆé»˜è®¤æ˜¯ dist ï¼‰æäº¤åˆ°åˆšæ‰åˆ›å»ºçš„`gh-pages`åˆ†æ”¯ä¸Šå»ï¼Œæ³¨æ„æ˜¯å°† dist æ–‡ä»¶å¤¹å†…çš„ä¸œè¥¿æäº¤ä¸Šå»è€Œä¸æ˜¯æ•´ä¸ªæ–‡ä»¶å¤¹ã€‚
9. ä¸€åˆ‡éƒ½å‡†å¤‡å¥½äº†ä¹‹åï¼Œè¿›å…¥ä»“åº“é¡µé¢ï¼Œç‚¹å‡»`Settings`ã€‚

![ç¤ºä¾‹](/images/2024-03-06-5.png)

10. é€‰æ‹©`Pages`, Source å¤„é€‰æ‹©`Deploy from a branch`ï¼Œ Branch å¤„é€‰æ‹©åˆšåˆšåˆ›å»ºå¥½çš„åˆ†æ”¯ï¼ˆ`/ (root)`è¡¨ç¤ºæ ¹ç›®å½•ï¼‰ï¼Œç„¶åç‚¹ä¸€ä¸‹æ—è¾¹çš„`save`æŒ‰é’®ã€‚ç¨ç­‰ä¸€ä¼šï¼Œä¸Šé¢å‡ºç°çš„ç½‘å€å°±æ˜¯ä½ çš„ç«™ç‚¹åœ°å€äº†ï¼Œåç»­`gh-pages`åˆ†æ”¯ä¸Šçš„æ¯ä¸€æ¬¡æäº¤éƒ½ä¼šè‡ªåŠ¨è§¦å‘ç½‘ç«™æ›´æ–°ã€‚

![ç¤ºä¾‹](/images/2024-03-06-6.png)

### è‡ªåŠ¨åŒ–

ä¸Šé¢æˆ‘ä»¬é€šè¿‡æ‰‹åŠ¨çš„æ–¹å¼å®Œæˆäº†éƒ¨ç½²ï¼Œç¼ºç‚¹æ˜¯æ¯æ¬¡æ›´æ–°éƒ½è¦æ‰‹åŠ¨æ‰“åŒ…ç„¶åæŠŠäº§ç‰©æ”¾åˆ°`gh-pages`åˆ†æ”¯ä¸Šå»ï¼Œæ¥ä¸‹æ¥æŠŠè¿™ä¸€è¿‡ç¨‹è‡ªåŠ¨åŒ–ï¼Œè¿™ä¸€è¿‡ç¨‹å¯ä»¥ç›´æ¥æ›¿æ¢æ‰ä¸Šé¢çš„ç¬¬7æ­¥å’Œç¬¬8æ­¥ã€‚

åˆ‡æ¢åˆ°ä½ çš„ä¸»åˆ†æ”¯ï¼Œåˆ›å»º`.github/workflows/ci.yml`æ–‡ä»¶ï¼Œä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ã€‚**ï¼ˆå»ºè®®ç¨å¾®ç†è§£ä¸€ä¸‹ï¼‰**

```yaml
name: Build and Deploy
on:
  push:
    branches:
      - main # mainåˆ†æ”¯æäº¤æ—¶è§¦å‘
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: Checkout ğŸ›ï¸
        uses: actions/checkout@v3
        with:
          fetch-depth: 0

        # æ‰“åŒ…ä»£ç ï¼Œdumiçš„æ‰“åŒ…å‘½ä»¤
      - name: Install and Build ğŸ”§
        run: |
          npm install
          npm run build

      - name: Deploy ğŸš€
        uses: JamesIves/github-pages-deploy-action@4.1.5
        with:
          branch: gh-pages # éƒ¨ç½²åˆ°çš„ç›®æ ‡åˆ†æ”¯
          folder: dist # dumiæ‰“åŒ…åçš„äº§ç‰©æ–‡ä»¶å¤¹
```

è¿™æ ·ï¼Œæˆ‘ä»¬æ¯æ¬¡æäº¤å®Œä»£ç éƒ½èƒ½è‡ªåŠ¨å®Œæˆéƒ¨ç½²å’Œç«™ç‚¹æ›´æ–°äº†ã€‚
